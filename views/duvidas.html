<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Dúvidas</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <div class="container mx-auto py-10">
    <h1 class="text-3xl font-bold mb-6">Todas as Dúvidas</h1>

    <a href="/nova-duvida.html" class="bg-green-600 text-white px-4 py-2 rounded">Criar Nova</a>
    <a href="/" class="ml-2 text-blue-600 underline">Voltar</a>

    <div id="lista" class="mt-6 flex flex-col gap-4"></div>
  </div>

  <script>
    async function carregarDuvidas() {
      const res = await fetch("/v1/duvidas");
      const duvidas = await res.json();

      const lista = document.getElementById("lista");
      lista.innerHTML = "";

      duvidas.forEach(d => {
        const card = document.createElement("div");
        card.className = "bg-white p-4 rounded shadow cursor-pointer hover:bg-gray-50";

        card.innerHTML = `
          <h2 class="text-xl font-bold">${d.titulo}</h2>
          <p class="text-gray-700">${d.descricao}</p>
          <p class="text-sm text-gray-500 mt-2">Respostas: ${d.respostas?.length || 0}</p>
        `;

        card.onclick = () => {
          window.location.href = "/detalhe.html?id=" + d.id;
        };

        lista.appendChild(card);
      });
    }

    carregarDuvidas();
  </script>

</body>
</html>
